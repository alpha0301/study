# 육각형 아키텍처

- 영속성, 웹, 외부시스템 어댑터에 대한 입출력을 추상화
- in / out port interface 를 통해 소통

# 웹 소캣 대응 및 의존성 역전

## Port Interface 를 활용

- controller -> in port, out port <- service
- service -> in port, out port <- repository
- 스택형 구조에서 벗어날 수 있음

# 모델 매핑 전략

## 단 방향 매핑 전략

- State interface 에 의존
- 읽기 기능만 필요한 경우 특정 영역에 필요한 모델로 캐스팅이 불필요

## 언제 어떤 매핑 전략을 취해야 하는가

- 변경 유스케이스일 경우
  - 웹 <-> 앱 계층에서는 완전 매핑(유효성 검증 규칙이 명확해야 하므로)
  - 앱 계층 <-> 영속성 계층에서는 매핑x을 기본으로 하고 앱 계층에서 영속성 문제를 다뤄야 한다면 양방향 매핑
- 쿼리 작업일 경우
  - 전 계층에서 기본적으로 매핑x
  - 만약 앱 계층에서 웹 또는 영속성 문제를 다뤄야 하면 각 계층간 양방향 매핑 전략을 쓰는게 좋음

위의 규칙을 기본으로 각 팀 상황에 알맞는 전략으로 다듬어야 함

# 테스트 전략

## 육각형 아키텍처에서 사용하는 전략

- 도메인 엔티티: 단위테스트
- 유스케이스: 단위테스트
- 어댑터: 통합테스트
- 사용자가 취할 수 있는 중요 앱 경로: 시스템 테스트

새로운 필드가 추가될 때마다 테스트를 고치는 데에 시간이 오래 걸린다면 설계 검토 필요


