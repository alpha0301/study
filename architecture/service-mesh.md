# 개요

서비스 간 커뮤니케이션은 MSA의 핵심입니다. 커뮤니케이션 통제 로직을 각 서비스에 맡길 수 있지만 크고 복잡해질 경우, 서비스 메쉬를 활용하먼 효과적일 수 있습니다.

## 작동 방식

서비스 A에서 B로 요청이 전달되는 방식을 지정하는 룰이 항상 필요합니다. 인프라계층에서 추상화된 형태로 로직이 존재합니다.
요청 측 입장에서 프록시와 유사하며, 각 서비스 내부가 아니라 각 서비스와 함께 실행되므로 'sidecar'라고도 합니다.

## 장점

- 각 커뮤니케이션의 모든 부분을 성능 메트릭으로 캡처
- 장애 발생 후 재시도가 성공하기까지의 소요 시간 수집 용이(분석 후 룰 조절을 통해 장애가 발생하지 않도록 조절 가능)
- 분산 추적: Jaeger
- 장애가 발생한 서비스로부터 요청을 재라우팅할 수 있기 때문에 복구 능력이 좋음

# istio

서비스 메쉬를 위한 오픈소스입니다. 서비스를 보호하고 연결 및 모니터링하는 균일하고 효율적인 방법을 제공합니다.

## 기능

- Envoy 기반 
- TLS 지원
- HTTP, gRPC, WebSocket 및 TCP traffic 에 대한 자동 로드 밸런싱
- 다양한 라우팅 규칙, 재시도 제어, 장애 조치 및 오류 주입으로 세밀하게 동작을 제어
- 엑세스 제어, 속도 제어 및 할당량 지정
- 클러스터 내의 모든 트래픽에 대한 자동 메트릭, 로그 및 추적

## 동작 원리

istio has two components: data plane, control plane

### data plane

서비스간의 통신들에 관한 것입니다. 트래픽을 이해하고 트래픽의 유형, 발신인, 수신인을 기반으로 결정할 수 있습니다.

### control plane

서비스들을 추적하고 설정을 관리합니다. 동적으로 프록시 서버들을 제어하고 룰이나 환경을 변경할 수 있습니다.

